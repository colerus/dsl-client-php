<?php

// runs tests using dsl-client-php from local source files (as opposed to downloaded dsl-client-php files)

$autoloadPath = __DIR__.'/../vendor/autoload.php';
if (!is_file($autoloadPath))
    throw new InvalidArgumentException('vendor/autoload.php file was not found! Did you run \'composer install/update\'?');

require_once $autoloadPath;

$bootstrapPath = __DIR__.'/platform/Bootstrap.php';
if(!is_file($bootstrapPath))
    die("Error: platform bootstrap file not found in: ".$bootstrapPath."\n".
        "It seems you are missing DSL-platform project files\n".
        "To run tests, you need to download the zipped DSL-platform project from http://dsl-platform.com and extract the contents of platform folder to: ".__DIR__.'/platform/'."\n");

$config = parse_ini_file(__DIR__.'/platform/project.ini');
$client = new NGS\Client\RestHttp($config['api-url']);
$client->setAuth($config['username'], $config['project-id']);
NGS\Client\RestHttp::instance($client);

require_once __DIR__.'/BaseTestCase.php';
require_once __DIR__.'/platform/modules/Modules.php';
